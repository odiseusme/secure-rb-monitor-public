# v1.2.0 Release Summary

## Overview

Version 1.2.0 brings significant UX improvements to the user registration and monitoring startup workflow. All changes are backward compatible with no migration required.

## What's New

### 1. Compact QR Code Generation
**Problem Solved**: QR codes generated by `qrencode` were too large for terminal display (40+ lines), making mobile scanning difficult.

**Solution**: 
- New Python-based QR generator using `python3-qrcode` library
- Optimized settings produce QR codes ~50% smaller (20-25 lines)
- ASCII art rendering ensures compatibility with all terminals
- Auto-detects optimal QR version based on URL length

**Installation**:
```bash
sudo apt-get install python3-qrcode
# or
pip3 install qrcode
```

**Usage**: Automatic during registration when user chooses to generate QR code

---

### 2. Two-Step Monitoring Prompt
**Problem Solved**: Users confused about what "Start monitoring now?" meant - local only or cloud sync?

**Solution**: Clear two-step decision process:

**Step 1**: "Would you like to [S]tart monitoring now, or [Q]uit?"
- Quick yes/no decision
- Users who want to quit can do so immediately

**Step 2** (if Start): "How would you like to monitor?"
- **[L] Local only**: Docker container at `http://localhost:8080` (no cloud sync)
- **[C] Cloud sync**: Both local monitor AND remote dashboard updates (recommended)
- **[Q] Quit**: Show manual start instructions

**Benefits**:
- Users understand difference between local-only and cloud sync
- Clear guidance for each scenario
- No more confusion about which services are running

---

### 3. Auto-Restore BASE_URL
**Problem Solved**: After registration, `BASE_URL` would disappear from `.env`, causing "No BASE_URL found" errors on subsequent runs.

**Solution**: 
- Script automatically restores `BASE_URL` from `.env.example` if missing
- Displays informative message when auto-restore happens
- No manual intervention needed

**Impact**: Users can run `register-user.sh` multiple times without setup errors

---

### 4. Passphrase Special Character Handling
**Problem Solved**: Auto-generated passphrases containing shell metacharacters (`&`, `|`, `;`, etc.) would break the uploader startup.

**Solution**:
- Passphrases now properly quoted in `.env`: `DASH_PASSPHRASE="&2MjqHBHqceD"`
- Prevents bash from interpreting special characters
- Cloud sync uploader starts reliably

---

## Migration Guide

**No migration required!** All changes are backward compatible.

If you're upgrading from v1.1.0:
1. `git pull` to get latest changes
2. Install `python3-qrcode`: `sudo apt-get install python3-qrcode`
3. (Optional) Remove `qrencode` if no longer needed elsewhere
4. Continue using as normal

---

## Technical Details

### QR Code Settings
```python
qrcode.QRCode(
    version=1,                                      # Start small, auto-increases
    error_correction=qrcode.constants.ERROR_CORRECT_L,  # Lowest = smallest
    box_size=3,                                     # Smaller pixels for PNG
    border=2,                                       # Minimal border (QR spec minimum)
)
```

### Cloud Sync Startup
```bash
nohup ./start-monitoring.sh start >/dev/null 2>&1 &
```
- Uses `nohup` to survive terminal close
- 2-second verification delay to confirm startup
- PID tracking for process monitoring

### File Changes
- `scripts/register-user.sh`: Main improvements
- `scripts/generate-compact-qr.py`: New QR generator (70 lines)
- `.env`: Passphrases now quoted
- `CHANGELOG.md`: Full v1.2.0 entry

---

## Testing Completed

✅ Registration flow with two-step prompts  
✅ Compact QR code generation and display  
✅ Local-only monitoring mode  
✅ Cloud sync monitoring mode (Docker + uploader)  
✅ BASE_URL auto-restore functionality  
✅ Passphrase with special characters (`&2MjqHBHqceD`)  
✅ Dashboard decryption with new passphrase  
✅ Full monitoring system running (verified)

---

## References

- Full changelog: [CHANGELOG.md](./CHANGELOG.md)
- Project documentation: [RBMonitor_project_description_and_future_plans.md](./RBMonitor_project_description_and_future_plans.md)
- Installation guide: [README.md](./README.md)
- Git tag: `v1.2.0`

---

## Credits

This release focused on real-world usability issues discovered during testing:
- QR codes too large for terminals
- Unclear monitoring startup options
- Recurring BASE_URL errors
- Shell metacharacters breaking automation

All issues resolved with backward compatibility maintained.
