# Rosen Bridge Monitor - Environment Configuration
# Copy this file to .env and adjust values as needed

# Will be set automatically by prepare_build.sh (do not edit manually)
DOCKER_GID=

# HOST_IP sets which interface Rosen Monitor binds to.
# Use 0.0.0.0 to allow connections from other devices (LAN/Wi-Fi/phone).
# Use 127.0.0.1 to restrict access to localhost only (more secure).
HOST_IP=0.0.0.0

# Host port for accessing the monitor (will be auto-selected if not set)
# This is the port you'll use in your browser: http://localhost:HOST_PORT
HOST_PORT=8080

# Internal container port (fixed at 8080, do not change)
MONITOR_PORT=8080

# How often the monitor updates data (milliseconds)
UPDATE_INTERVAL=30000

# Timezone for log timestamps (use your local timezone like America/New_York)
TZ=UTC

# Node environment
NODE_ENV=production

# Note: HOST_PORT is the external port you access from your browser
# MONITOR_PORT is the internal container port (always 8080)
# The docker-compose maps HOST_IP:HOST_PORT -> container:MONITOR_PORT

# ==============================================
# Network Egress Security Configuration
# ==============================================

# Required: Your Cloudflare Worker URL
# NOTE: This is automatically set as BASE_URL during user registration (register-user.sh)
# Network egress security uses BASE_URL automatically - no manual configuration needed!
# CLOUDFLARE_BASE_URL=https://your-worker.your-subdomain.workers.dev

# Network egress allowlist is HARDCODED for security:
#   1. Your Cloudflare Worker domain (auto-derived from BASE_URL or CLOUDFLARE_BASE_URL)
#   2. api.ergoplatform.com (required for wallet balance fetching)
#
# No additional destinations can be added via environment variables.
# This is intentional for security - prevents unauthorized outbound connections.
# If you need to allow additional domains, modify lib/egress-validator.js

# Optional: Allow IP literal egress (for local development/tunnels)
# Set to 'true' only when connecting to:
#   - ngrok/localtunnel endpoints (e.g., https://abc123.ngrok.io)
#   - Local test servers via IP (e.g., http://192.168.1.100:8787)
#   - Development environments without DNS
# WARNING: IPs are blocked in production for security
# Default: false
# ALLOW_IP_EGRESS=false

# Optional: Allow HTTP connections (insecure)
# Automatically enabled in NODE_ENV=development
# Default: false in production, true in development
# ALLOW_HTTP=false

# Optional: Fetch timeout in milliseconds
# How long to wait for a response before aborting
# Default: 15000 (15 seconds)
# FETCH_TIMEOUT_MS=15000

# Optional: Egress cache TTL in milliseconds
# How long to cache the parsed allowlist (reduces startup banner spam)
# Default: 300000 (5 minutes)
# EGRESS_CACHE_TTL_MS=300000

# Required: Cloudflare credentials
CLOUDFLARE_PUBLIC_ID=your_public_id_here
CLOUDFLARE_WRITE_TOKEN=your_write_token_here

# Optional: Ergo Explorer API endpoints for balance fetching
# Default uses official Ergo Explorer
# ERGO_EXPLORER_API=https://api.ergoplatform.com
